CC := gcc
STD := -std=c17
SRC := src/
INC := inc/
LIB := lib/

# r√©pertoire o√π se trouve la lib. (truc.h|libtruc.so)
LPATH := mtrack/
# Nom de la biblioth√®que √† utiliser (ex: mtrack1, mtrack2, etc.)
LIBNAME := mtrack1

PFLAGS := -I$(INC) -I$(LPATH)$(INC)
CFLAGS := -Wall -include $(LPATH)$(INC)$(LIBNAME).h
LFLAGS := -lm -Wl,-rpath,$(LPATH)$(LIB) -L$(LPATH)$(LIB) -l$(LIBNAME)

%.o : $(SRC)%.c
	@echo "üìù Compiling $< (with $(LIBNAME).h)..."
	$(CC) $^ -c $(STD) $(PFLAGS) $(CFLAGS) -o $@
	
% : %.o
	@echo "üîó Linking $< (with lib$(LIBNAME).so)..."
	$(CC) $< $(LFLAGS) -o $@